{"ast":null,"code":"var _jsxFileName = \"/Users/sophiedyrlund/Desktop/la_capsule/project/morning news/part5.nosync/morningNew/reactapp/src/ScreenArticlesBySource.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './App.css';\nimport { Card, Icon, Modal } from 'antd';\nimport Nav from './Nav';\nimport { connect } from 'react-redux';\nconst {\n  Meta\n} = Card;\n\nfunction ScreenArticlesBySource(props) {\n  const [articleList, setArticleList] = useState([]);\n  const [visible, setVisible] = useState(false);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    const findArticles = async () => {\n      const data = await fetch(`https://newsapi.org/v2/top-headlines?sources=${id}&apiKey=9b113ef4af7b4581abd544e9c761ab74`);\n      const body = await data.json();\n      console.log(body);\n      setArticleList(body.articles);\n    };\n\n    findArticles();\n  }, []); // Enregistrer un article\n\n  const saveWishlist = async article => {\n    console.log('saveWishlist');\n    props.addToWishlist(article);\n    const saveResponse = await fetch('/wishlist-article', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `name=${article.title}&content=${article.content}&desc=${article.description}&img=${article.urlToImage}&token=${props.token}`\n    });\n  };\n\n  const showModal = (title, content) => {\n    setVisible(true);\n    setTitle(title);\n    setContent(content);\n  };\n\n  const handleOk = e => {\n    console.log(e);\n    setVisible(false);\n  };\n\n  const handleCancel = e => {\n    console.log(e);\n    setVisible(false);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Banner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, articleList.map((article, i) => React.createElement(\"div\", {\n    key: i,\n    style: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Card, {\n    style: {\n      width: 300,\n      margin: '15px',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between'\n    },\n    cover: React.createElement(\"img\", {\n      alt: \"example\",\n      src: article.urlToImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }),\n    actions: [React.createElement(Icon, {\n      type: \"read\",\n      key: \"ellipsis2\",\n      onClick: () => showModal(article.title, article.content),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(Icon, {\n      type: \"like\",\n      key: \"ellipsis\",\n      onClick: () => {\n        saveWishlist(article);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Meta, {\n    title: article.title,\n    description: article.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })), React.createElement(Modal, {\n    title: title,\n    visible: visible,\n    onOk: handleOk,\n    onCancel: handleCancel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, content))))));\n}\n\nfunction mapStateToProps(state) {\n  return {\n    token: state.token\n  };\n}\n\n;\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addToWishList: function (article) {\n      dispatch({\n        type: 'addArticle',\n        articleLiked: article\n      });\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenArticlesBySource);","map":{"version":3,"sources":["/Users/sophiedyrlund/Desktop/la_capsule/project/morning news/part5.nosync/morningNew/reactapp/src/ScreenArticlesBySource.js"],"names":["React","useState","useEffect","useParams","Card","Icon","Modal","Nav","connect","Meta","ScreenArticlesBySource","props","articleList","setArticleList","visible","setVisible","title","setTitle","content","setContent","id","findArticles","data","fetch","body","json","console","log","articles","saveWishlist","article","addToWishlist","saveResponse","method","headers","description","urlToImage","token","showModal","handleOk","e","handleCancel","map","i","display","justifyContent","width","margin","flexDirection","mapStateToProps","state","mapDispatchToProps","dispatch","addToWishList","type","articleLiked"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useParams } from 'react-router-dom';\nimport './App.css';\nimport { Card, Icon, Modal} from 'antd';\nimport Nav from './Nav'\nimport {connect} from 'react-redux'\n\nconst { Meta } = Card;\n\nfunction ScreenArticlesBySource(props) {\n\n  const [articleList, setArticleList] = useState([])\n\n  const [visible, setVisible] = useState(false)\n  const [title, setTitle] = useState('')\n  const [content, setContent] = useState('')\n\n  const { id } = useParams();\n\n  useEffect(() => {\n    const findArticles = async() => {\n      const data = await fetch(`https://newsapi.org/v2/top-headlines?sources=${id}&apiKey=9b113ef4af7b4581abd544e9c761ab74`)\n      const body = await data.json()\n      console.log(body)\n      setArticleList(body.articles) \n    }\n\n    findArticles()    \n  },[])\n\n\n  // Enregistrer un article\n  const saveWishlist = async (article) => {\n    console.log('saveWishlist')\n\n    props.addToWishlist(article);\n\n    const saveResponse = await fetch('/wishlist-article', {\n      method: 'POST',\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n      body: `name=${article.title}&content=${article.content}&desc=${article.description}&img=${article.urlToImage}&token=${props.token}`\n    })\n  };  \n\n\n\n  const showModal = (title, content) => {\n    setVisible(true)\n    setTitle(title)\n    setContent(content)\n\n  }\n\n  const handleOk = e => {\n    console.log(e)\n    setVisible(false)\n  }\n\n  const handleCancel = e => {\n    console.log(e)\n    setVisible(false)\n  }\n\n  return (\n    <div>\n      <Nav/>\n      <div className=\"Banner\"/>\n      <div className=\"Card\">\n        {articleList.map((article,i) => (\n          <div key={i} style={{display:'flex',justifyContent:'center'}}>\n            <Card\n              style={{ \n                width: 300, \n                margin:'15px', \n                display:'flex',\n                flexDirection: 'column',\n                justifyContent:'space-between' \n              }}\n              cover={ \n                <img\n                  alt=\"example\"\n                  src={article.urlToImage}\n                />\n              }\n              actions={[\n                <Icon type=\"read\" key=\"ellipsis2\" onClick={() => showModal(article.title,article.content)} />,\n                <Icon type=\"like\" key=\"ellipsis\" onClick={()=> {saveWishlist(article)}} />\n              ]}\n            >\n            <Meta\n              title={article.title}\n              description={article.description}\n            />\n            </Card>\n            <Modal\n              title={title}\n              visible={visible}\n              onOk={handleOk}\n              onCancel={handleCancel}\n            >\n              <p>{content}</p>\n            </Modal>\n          </div>\n        ))}\n      </div> \n    </div>\n  );\n}\n\n\nfunction mapStateToProps(state) {\n  return {\n      token: state.token\n  }\n};\n\n\nfunction mapDispatchToProps(dispatch){\n  return {\n    addToWishList: function(article){\n      dispatch({type: 'addArticle',\n                articleLiked: article\n      })\n    }\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ScreenArticlesBySource)\n"]},"metadata":{},"sourceType":"module"}